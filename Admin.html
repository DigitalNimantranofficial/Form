<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>SRK Login</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link href="https://fonts.googleapis.com/css2?family=Outfit&display=swap" rel="stylesheet">
  <style>
    * { box-sizing: border-box; }
    body {
      margin: 0;
      background: #0f111a;
      font-family: 'Outfit', sans-serif;
      display: flex;
      justify-content: center;
      align-items: center;
      min-height: 100vh;
    }

    .glow-wrapper {
      position: relative;
      padding: 3px;
      border-radius: 20px;
      background: linear-gradient(270deg, #ff0057, #00f2ea, #ff0057);
      background-size: 600% 600%;
      animation: animatedGlow 5s linear infinite;
      transition: transform 0.3s ease;
    }

    .glow-wrapper:hover {
      transform: scale(1.03);
    }

    @keyframes animatedGlow {
      0% { background-position: 0% 50%; }
      50% { background-position: 100% 50%; }
      100% { background-position: 0% 50%; }
    }

    .login-container {
      background: #1a1c29;
      border-radius: 18px;
      padding: 40px 30px;
      width: 350px;
    }

    .login-container h2 {
      text-align: center;
      color: #ffffff;
      margin-bottom: 20px;
      font-size: 1.5rem;
    }

    .input-box {
      margin-bottom: 20px;
    }

    .input-box input {
      width: 100%;
      padding: 12px;
      background: #0f111a;
      border: 2px solid #2c2f3f;
      border-radius: 50px;
      color: white;
      font-size: 0.95rem;
      transition: 0.3s ease;
    }

    .input-box input:hover {
      border-color: #00f2ea;
      box-shadow: 0 0 10px #00f2ea88;
    }

    .input-box input:focus {
      outline: none;
    }

    button {
      width: 100%;
      padding: 12px;
      border-radius: 50px;
      border: none;
      background: #00f2ea;
      color: black;
      font-weight: bold;
      cursor: pointer;
      font-size: 1rem;
      transition: 0.3s ease;
    }

    button:disabled {
      background: #88f2ea;
      cursor: not-allowed;
    }

    button:hover:enabled {
      background: #00c8c8;
      box-shadow: 0 0 15px #00f2ea;
    }

    .bottom-links {
      display: flex;
      justify-content: space-between;
      margin-top: 15px;
      font-size: 0.85rem;
    }

    .bottom-links a {
      color: #ff0057;
      text-decoration: none;
    }

    #adminPanel {
      display: none;
      width: 95%;
      max-width: 1100px;
      margin: auto;
      background: white;
      padding: 30px;
      border-radius: 12px;
      box-shadow: 0 0 25px rgba(0,0,0,0.15);
    }

    table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 20px;
      font-size: 0.95rem;
    }

    th, td {
      padding: 10px;
      border: 1px solid #ccc;
      text-align: left;
    }

    th {
      background: #4f46e5;
      color: white;
    }

    #logoutBtn {
      background: #f87171;
      margin-top: 20px;
    }

    /* Loading Spinner */
    #loadingSpinner {
      display: none;
      position: fixed;
      top: 0; left: 0;
      width: 100%; height: 100%;
      background: rgba(0, 0, 0, 0.6);
      z-index: 9999;
      align-items: center;
      justify-content: center;
    }

    .spinner {
      border: 8px solid #f3f3f3;
      border-top: 8px solid #00f2ea;
      border-radius: 50%;
      width: 60px;
      height: 60px;
      animation: spin 1s linear infinite;
    }

    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }

    /* ‚ùå Wrong Password Popup */
    #errorPopup {
      display: none;
      position: fixed;
      top: 0; left: 0;
      width: 100vw;
      height: 100vh;
      background: rgba(0, 0, 0, 0.7);
      z-index: 99999;
      align-items: center;
      justify-content: center;
    }

    .popup-content {
      background: white;
      padding: 25px 20px;
      border-radius: 10px;
      text-align: center;
      box-shadow: 0 0 15px rgba(0,0,0,0.4);
      max-width: 300px;
    }

    .popup-content h3 {
      margin-bottom: 15px;
      color: red;
    }

    .popup-content button {
      background: #00f2ea;
      border: none;
      padding: 10px 25px;
      font-weight: bold;
      border-radius: 25px;
      cursor: pointer;
      margin-top: 10px;
    }
  </style>
</head>
<body>

<!-- üí° Login Glow Frame -->
<div class="glow-wrapper" id="loginBox">
  <form id="loginForm" class="login-container">
    <h2><span style="color:#ff0057;">üîí</span> SRK LOGIN <span style="color:#ff0057;">üóùÔ∏è</span></h2>
    <div class="input-box">
      <input type="email" id="email" placeholder="Username" required />
    </div>
    <div class="input-box">
      <input type="password" id="password" placeholder="Password" required />
    </div>
    <button type="submit" id="submitBtn">Sign in</button>
    <div class="bottom-links">
      <a href="#">Forgot Password</a>
      <a href="#">Sign up</a>
    </div>
  </form>
</div>

<!-- üîÅ Loading Spinner -->
<div id="loadingSpinner">
  <div class="spinner"></div>
</div>

<!-- ‚ùå Wrong Password Popup -->
<div id="errorPopup">
  <div class="popup-content">
    <h3>Wrong Email or Password</h3>
    <p>Please try again.</p>
    <button onclick="closeErrorPopup()">OK</button>
  </div>
</div>

<!-- üßæ Admin Panel -->
<div id="adminPanel">
  <h2 style="color:#4f46e5;">Customer Submissions</h2>
  <table>
    <thead>
      <tr>
        <th>Name</th><th>Email</th><th>Contact</th><th>Address</th>
        <th>Date</th><th>Event Type</th><th>Submitted At</th>
      </tr>
    </thead>
    <tbody id="dataTable"></tbody>
  </table>
  <button id="logoutBtn" onclick="logout()">Logout</button>
</div>

<!-- üîê Firebase SDK -->
<script src="https://www.gstatic.com/firebasejs/10.4.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.4.0/firebase-auth-compat.js"></script>

<script>
  const firebaseConfig = {
    apiKey: "AIzaSyBVtSOWlpPcNUHgsXjHtVjV3Tt4nt220r0",
    authDomain: "digital-nimantran-form-213dd.firebaseapp.com",
    projectId: "digital-nimantran-form-213dd",
    storageBucket: "digital-nimantran-form-213dd.firebasestorage.app",
    messagingSenderId: "613010803048",
    appId: "1:613010803048:web:58e679b96428c46582aedd"
  };

  firebase.initializeApp(firebaseConfig);
  const auth = firebase.auth();

  document.getElementById("loginForm").addEventListener("submit", function(e) {
    e.preventDefault();

    const submitBtn = document.getElementById("submitBtn");
    submitBtn.disabled = true;
    submitBtn.textContent = "Please wait...";

    document.getElementById("loadingSpinner").style.display = "flex";

    const email = document.getElementById("email").value.trim();
    const pass = document.getElementById("password").value.trim();

    auth.signInWithEmailAndPassword(email, pass)
      .then(() => {
        document.getElementById("loadingSpinner").style.display = "none";
        document.getElementById("loginBox").style.display = "none";
        document.getElementById("adminPanel").style.display = "block";
        loadData();
      })
      .catch(error => {
        document.getElementById("loadingSpinner").style.display = "none";
        showErrorPopup(); // Show popup instead of alert
        submitBtn.disabled = false;
        submitBtn.textContent = "Sign in";
      });
  });

  function loadData() {
    const table = document.getElementById("dataTable");
    const entries = JSON.parse(localStorage.getItem("submissions") || "[]");
    table.innerHTML = "";
    for (let entry of entries) {
      table.innerHTML += `<tr>
        <td>${entry.name}</td>
        <td>${entry.email}</td>
        <td>${entry.contact}</td>
        <td>${entry.address}</td>
        <td>${entry.date}</td>
        <td>${entry.eventType || "-"}</td>
        <td>${entry.submittedAt}</td>
      </tr>`;
    }
  }

  function logout() {
    auth.signOut().then(() => {
      location.reload();
    });
  }

  // üî¥ Show/hide popup functions
  function showErrorPopup() {
    document.getElementById("errorPopup").style.display = "flex";
  }

  function closeErrorPopup() {
    document.getElementById("errorPopup").style.display = "none";
  }
</script>
</body>
</html>

